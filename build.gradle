plugins {
    id 'application'
    id 'org.openjfx.javafxplugin' version '0.1.0'
}

repositories {
    mavenCentral()
}

javafx {
    version = "22.0.1"
    modules = [ 'javafx.controls', 'javafx.fxml' ]
}
task buildDB(type: Exec){
    workingDir "src/main"
    environment "PGPASSWORD", "${PGPASSWORD}"
    environment "PGUSER", "${PGUSER}"
    environment "PGHOST", "${PGHOST}"
    environment "PGDATABASE", "${PGDATABASE}"

    commandLine 'powershell' , '/C' , 'py ./python/db_script.py'
    commandLine 'powershell' , '/C' , 'psql -f ./resources/sql/inset_tables.sql'
    commandLine 'powershell' , '/C','psql -c \'\\copy employees FROM "./resources/csv/employees.csv"\''
    commandLine 'powershell' , '/C','psql -c \'\\copy passwords FROM "./resources/csv/passwords.csv"\''
    commandLine 'powershell' , '/C','psql -c \'\\copy menu FROM "./resources/csv/menu.csv"\''
    commandLine 'powershell' , '/C','psql -c \'\\copy inventory FROM "./resources/csv/inventory.csv"\''
    commandLine 'powershell' , '/C','psql -c \'\\copy overarching_items FROM "./resources/csv/overarching_items.csv"\''
    commandLine 'powershell' , '/C','psql -c \'\\copy ingredients_needed FROM "./resources/csv/ingredients_needed.csv"\''
    commandLine 'powershell' , '/C','psql -c \'\\copy order_history FROM "./resources/csv/order_history.csv"\''
    commandLine 'powershell' , '/C','psql -c \'\\copy order_items FROM "./resources/csv/order_items.csv"\''
}


mainClassName = 'HomePage'
